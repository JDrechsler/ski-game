(()=>{"use strict";var t={886:(t,e,i)=>{i.d(e,{Z:()=>s});var n=i(81),o=i.n(n),r=i(645),a=i.n(r)()(o());a.push([t.id,"html,\nbody {\n    margin: 0;\n    padding: 0;\n}\n",""]);const s=a},645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var i="",n=void 0!==e[5];return e[4]&&(i+="@supports (".concat(e[4],") {")),e[2]&&(i+="@media ".concat(e[2]," {")),n&&(i+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),i+=t(e),n&&(i+="}"),e[2]&&(i+="}"),e[4]&&(i+="}"),i})).join("")},e.i=function(t,i,n,o,r){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(n)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(a[c]=!0)}for(var u=0;u<t.length;u++){var h=[].concat(t[u]);n&&a[h[0]]||(void 0!==r&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=r),i&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=i):h[2]=i),o&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=o):h[4]="".concat(o)),e.push(h))}},e}},81:t=>{t.exports=function(t){return t[1]}},379:t=>{var e=[];function i(t){for(var i=-1,n=0;n<e.length;n++)if(e[n].identifier===t){i=n;break}return i}function n(t,n){for(var r={},a=[],s=0;s<t.length;s++){var c=t[s],u=n.base?c[0]+n.base:c[0],h=r[u]||0,p="".concat(u," ").concat(h);r[u]=h+1;var l=i(p),f={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==l)e[l].references++,e[l].updater(f);else{var m=o(f,n);n.byIndex=s,e.splice(s,0,{identifier:p,updater:m,references:1})}a.push(p)}return a}function o(t,e){var i=e.domAPI(e);return i.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;i.update(t=e)}else i.remove()}}t.exports=function(t,o){var r=n(t=t||[],o=o||{});return function(t){t=t||[];for(var a=0;a<r.length;a++){var s=i(r[a]);e[s].references--}for(var c=n(t,o),u=0;u<r.length;u++){var h=i(r[u]);0===e[h].references&&(e[h].updater(),e.splice(h,1))}r=c}}},569:t=>{var e={};t.exports=function(t,i){var n=function(t){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}e[t]=i}return e[t]}(t);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(i)}},216:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,i)=>{t.exports=function(t){var e=i.nc;e&&t.setAttribute("nonce",e)}},795:t=>{t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(i){!function(t,e,i){var n="";i.supports&&(n+="@supports (".concat(i.supports,") {")),i.media&&(n+="@media ".concat(i.media," {"));var o=void 0!==i.layer;o&&(n+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),n+=i.css,o&&(n+="}"),i.media&&(n+="}"),i.supports&&(n+="}");var r=i.sourceMap;r&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleTagTransform(n,t,e.options)}(e,t,i)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},e={};function i(n){var o=e[n];if(void 0!==o)return o.exports;var r=e[n]={id:n,exports:{}};return t[n](r,r.exports,i),r.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.nc=void 0,(()=>{var t=i(379),e=i.n(t),n=i(795),o=i.n(n),r=i(569),a=i.n(r),s=i(565),c=i.n(s),u=i(216),h=i.n(u),p=i(589),l=i.n(p),f=i(886),m={};m.styleTagTransform=l(),m.setAttributes=c(),m.insert=a().bind(null,"head"),m.domAPI=o(),m.insertStyleElement=h(),e()(f.Z,m),f.Z&&f.Z.locals&&f.Z.locals;var d,g,y=window.innerWidth,v=window.innerHeight;!function(t){t.LEFT="ArrowLeft",t.RIGHT="ArrowRight",t.UP="ArrowUp",t.DOWN="ArrowDown",t.SPACE=" ",t.P="p",t.R="r",t.ESC="Escape"}(d||(d={})),function(t){t.SKIER_CRASH="skierCrash",t.SKIER_LEFT="skierLeft",t.SKIER_LEFTDOWN="skierLeftDown",t.SKIER_DOWN="skierDown",t.SKIER_RIGHTDOWN="skierRightDown",t.SKIER_RIGHT="skierRight",t.SKIER_JUMP1="skierJump1",t.SKIER_JUMP2="skierJump2",t.SKIER_JUMP3="skierJump3",t.SKIER_JUMP4="skierJump4",t.SKIER_JUMP5="skierJump5",t.TREE="tree",t.TREE_CLUSTER="treeCluster",t.ROCK1="rock1",t.ROCK2="rock2",t.JUMP_RAMP="jumpRamp",t.RHINO="rhino",t.RHINO_RUN1="rhinoRun1",t.RHINO_RUN2="rhinoRun2",t.RHINO_EAT1="rhinoEat1",t.RHINO_EAT2="rhinoEat2",t.RHINO_EAT3="rhinoEat3",t.RHINO_EAT4="rhinoEat4",t.RHINO_CELEBRATE1="rhinoCelebrate1",t.RHINO_CELEBRATE2="rhinoCelebrate2"}(g||(g={})),g.SKIER_JUMP1,g.SKIER_JUMP2,g.SKIER_JUMP3,g.SKIER_JUMP4,g.SKIER_JUMP5;var w=[{name:g.SKIER_CRASH,url:"img/skier_crash.png"},{name:g.SKIER_LEFT,url:"img/skier_left.png"},{name:g.SKIER_LEFTDOWN,url:"img/skier_left_down.png"},{name:g.SKIER_DOWN,url:"img/skier_down.png"},{name:g.SKIER_RIGHTDOWN,url:"img/skier_right_down.png"},{name:g.SKIER_RIGHT,url:"img/skier_right.png"},{name:g.SKIER_JUMP1,url:"img/skier_jump_1.png"},{name:g.SKIER_JUMP2,url:"img/skier_jump_2.png"},{name:g.SKIER_JUMP3,url:"img/skier_jump_3.png"},{name:g.SKIER_JUMP4,url:"img/skier_jump_4.png"},{name:g.SKIER_JUMP5,url:"img/skier_jump_5.png"},{name:g.TREE,url:"img/tree_1.png"},{name:g.TREE_CLUSTER,url:"img/tree_cluster.png"},{name:g.ROCK1,url:"img/rock_1.png"},{name:g.ROCK2,url:"img/rock_2.png"},{name:g.JUMP_RAMP,url:"img/jump_ramp.png"},{name:g.RHINO,url:"img/rhino_default.png"},{name:g.RHINO_RUN1,url:"img/rhino_run_left.png"},{name:g.RHINO_RUN2,url:"img/rhino_run_left_2.png"},{name:g.RHINO_EAT1,url:"img/rhino_eat_1.png"},{name:g.RHINO_EAT2,url:"img/rhino_eat_2.png"},{name:g.RHINO_EAT3,url:"img/rhino_eat_3.png"},{name:g.RHINO_EAT4,url:"img/rhino_eat_4.png"},{name:g.RHINO_CELEBRATE1,url:"img/rhino_celebrate_1.png"},{name:g.RHINO_CELEBRATE2,url:"img/rhino_celebrate_2.png"}],E=1.4142;function _(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}var I=function(t,e){this.x=0,this.y=0,this.x=t,this.y=e},A=function(t,e,i,n){this.left=0,this.top=0,this.right=0,this.bottom=0,this.left=t,this.top=e,this.right=i,this.bottom=n};function R(t,e){return!(e.left>t.right||e.right<t.left||e.top>t.bottom||e.bottom<t.top)}var T,b,S=function(){function t(t,e,i){this.drawOffset=new I(0,0),this.canvasId=t,this.width=e,this.height=i,this.canvas=this.findCanvas(),this.ctx=this.getCanvasContext(),this.setupCanvas()}return t.prototype.findCanvas=function(){var t=document.getElementById(this.canvasId);if(!(t instanceof HTMLCanvasElement))throw new Error("Canvas element ".concat(this.canvasId," not found!"));return t},t.prototype.getCanvasContext=function(){var t=this.canvas.getContext("2d");if(!t)throw new Error("Could not retrieve context for canvas ".concat(this.canvasId));return t},t.prototype.setupCanvas=function(){this.canvas.width=this.width*window.devicePixelRatio,this.canvas.height=this.height*window.devicePixelRatio,this.canvas.style.width=this.width+"px",this.canvas.style.height=this.height+"px",this.ctx.scale(window.devicePixelRatio,window.devicePixelRatio)},t.prototype.clearCanvas=function(){this.ctx.clearRect(0,0,this.width,this.height)},t.prototype.setDrawOffset=function(t,e){this.drawOffset.x=t,this.drawOffset.y=e},t.prototype.drawImage=function(t,e,i,n,o){e-=this.drawOffset.x,i-=this.drawOffset.y,this.ctx.drawImage(t,e,i,n,o)},t}(),N=function(){function t(){this.loadedImages={}}return t.prototype.loadImages=function(t){return e=this,i=void 0,o=function(){var e,i,n,o,r;return function(t,e){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(c){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(a=0)),a;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,(function(a){switch(a.label){case 0:for(e=[],i=0,n=t;i<n.length;i++)o=n[i],r=this.loadSingleImage(o),e.push(r);return[4,Promise.all(e)];case 1:return a.sent(),[2]}}))},new((n=void 0)||(n=Promise))((function(t,r){function a(t){try{c(o.next(t))}catch(t){r(t)}}function s(t){try{c(o.throw(t))}catch(t){r(t)}}function c(e){var i;e.done?t(e.value):(i=e.value,i instanceof n?i:new n((function(t){t(i)}))).then(a,s)}c((o=o.apply(e,i||[])).next())}));var e,i,n,o},t.prototype.loadSingleImage=function(t){var e=this;return new Promise((function(i){var n=new Image;n.onload=function(){t.name===g.JUMP_RAMP?(n.width*=1,n.height*=1):(n.width*=.5,n.height*=.5),e.loadedImages[t.name]=n,i()},n.src=t.url}))},t.prototype.getImage=function(t){return this.loadedImages[t]},t}(),O=function(){function t(t,e,i,n){this.position=new I(t,e),this.imageManager=i,this.canvas=n}return t.prototype.getPosition=function(){return this.position},t.prototype.draw=function(){var t=this.imageManager.getImage(this.imageName);if(t){var e=this.position.x-t.width/2,i=this.position.y-t.height/2;this.canvas.drawImage(t,e,i,t.width,t.height)}},t.prototype.getBounds=function(){var t=this.imageManager.getImage(this.imageName);return t?new A(this.position.x-t.width/2,this.position.y-t.height/2,this.position.x+t.width/2,this.position.y):null},t}(),k=(T=function(t,e){return T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},T(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}T(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),M=[{imageName:g.TREE,weight:30},{imageName:g.TREE_CLUSTER,weight:30},{imageName:g.ROCK1,weight:20},{imageName:g.ROCK2,weight:10},{imageName:g.JUMP_RAMP,weight:10}],P=function(t){function e(e,i,n,o){var r=t.call(this,e,i,n,o)||this;r.weight=0;var a=r.getRandomObstacleType();return r.imageName=M[a].imageName,r}return k(e,t),e.prototype.getRandomObstacleType=function(){for(var t=0,e=M.map((function(e){var i=e.weight;return t+=i,i})),i=Math.random()*t,n=0;n<e.length;n++){if(i<e[n])return n;i-=e[n]}return M.length-1},e.prototype.die=function(){},e}(O),x=function(){function t(t,e){this.obstacles=[],this.imageManager=t,this.canvas=e}return t.prototype.getObstacles=function(){return this.obstacles},t.prototype.drawObstacles=function(){this.obstacles.forEach((function(t){t.draw()}))},t.prototype.placeInitialObstacles=function(){for(var t=Math.ceil(y/300*(v/300)),e=new A(-y/2,100,y/2,v/2),i=0;i<t;i++)this.placeRandomObstacle(e);this.obstacles.sort((function(t,e){return t.getPosition().y-e.getPosition().y}))},t.prototype.placeNewObstacle=function(t,e){8===_(1,8)&&(t.left<e.left?this.placeObstacleLeft(t):t.left>e.left&&this.placeObstacleRight(t),t.top<e.top?this.placeObstacleTop(t):t.top>e.top&&this.placeObstacleBottom(t))},t.prototype.placeObstacleLeft=function(t){var e=new A(t.left,t.top,t.left,t.bottom);this.placeRandomObstacle(e)},t.prototype.placeObstacleRight=function(t){var e=new A(t.right,t.top,t.right,t.bottom);this.placeRandomObstacle(e)},t.prototype.placeObstacleTop=function(t){var e=new A(t.left,t.top,t.right,t.top);this.placeRandomObstacle(e)},t.prototype.placeObstacleBottom=function(t){var e=new A(t.left,t.bottom,t.right,t.bottom);this.placeRandomObstacle(e)},t.prototype.placeRandomObstacle=function(t){var e;do{e=this.calculateOpenPosition(t)}while(!e);var i=new P(e.x,e.y,this.imageManager,this.canvas);this.obstacles.push(i)},t.prototype.calculateOpenPosition=function(t){var e=_(t.left,t.right),i=_(t.top,t.bottom);return this.obstacles.find((function(t){var n=t.getPosition().x,o=t.getPosition().y;return e>n-50&&e<n+50&&i>o-50&&i<o+50}))?null:new I(e,i)},t}(),C=function(){function t(t,e,i){this.images=t,this.looping=e,this.callback=i}return t.prototype.getImages=function(){return this.images},t.prototype.getLooping=function(){return this.looping},t.prototype.getCallback=function(){return this.callback},t}(),D=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(t){t.STATE_RUNNING="running",t.STATE_EATING="eating",t.STATE_CELEBRATING="celebrating"}(b||(b={}));var K,U,H,G=[g.RHINO_RUN1,g.RHINO_RUN2],J=[g.RHINO_EAT1,g.RHINO_EAT2,g.RHINO_EAT3,g.RHINO_EAT4],L=[g.RHINO_CELEBRATE1,g.RHINO_CELEBRATE2],F=function(t){function e(e,i,n,o){var r=t.call(this,e,i,n,o)||this;return r.imageName=g.RHINO,r.state=b.STATE_RUNNING,r.speed=4,r.animations={},r.curAnimation=null,r.curAnimationFrame=0,r.curAnimationFrameTime=Date.now(),r.setupAnimations(),r.setAnimation(),r}return D(e,t),e.prototype.setupAnimations=function(){this.animations[b.STATE_RUNNING]=new C(G,!0),this.animations[b.STATE_EATING]=new C(J,!1,this.celebrate.bind(this)),this.animations[b.STATE_CELEBRATING]=new C(L,!0)},e.prototype.setState=function(t){this.state=t,this.setAnimation()},e.prototype.isRunning=function(){return this.state===b.STATE_RUNNING},e.prototype.update=function(t,e){this.isRunning()&&(this.move(e),this.checkIfCaughtTarget(e)),this.animate(t)},e.prototype.move=function(t){if(this.isRunning()){var e,i,n,o,r,a=t.getPosition(),s=(e=this.position.x,i=this.position.y,n=a.x-e,o=a.y-i,(r=Math.hypot(n,o))&&(n/=r,o/=r),new I(n,o));this.position.x+=s.x*this.speed,this.position.y+=s.y*this.speed}},e.prototype.animate=function(t){this.curAnimation&&t-this.curAnimationFrameTime>250&&this.nextAnimationFrame(t)},e.prototype.nextAnimationFrame=function(t){if(this.curAnimation){var e=this.curAnimation.getImages();if(this.curAnimationFrameTime=t,this.curAnimationFrame++,this.curAnimationFrame>=e.length){if(!this.curAnimation.getLooping())return void this.finishAnimation();this.curAnimationFrame=0}this.imageName=e[this.curAnimationFrame]}},e.prototype.finishAnimation=function(){if(this.curAnimation){var t=this.curAnimation.getCallback();this.curAnimation=null,t&&t.apply(null)}},e.prototype.checkIfCaughtTarget=function(t){var e=this.getBounds(),i=t.getBounds();e&&i&&R(e,i)&&this.caughtTarget(t)},e.prototype.caughtTarget=function(t){t.die(),this.setState(b.STATE_EATING)},e.prototype.celebrate=function(){this.setState(b.STATE_CELEBRATING)},e.prototype.setAnimation=function(){if(this.curAnimation=this.animations[this.state],this.curAnimation){this.curAnimationFrame=0;var t=this.curAnimation.getImages();this.imageName=t[this.curAnimationFrame]}},e.prototype.die=function(){},e}(O),j=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(t){t.STATE_SKIING="skiing",t.STATE_JUMPING="jumping",t.STATE_FLIPPING="flipping",t.STATE_CRASHED="crashed",t.STATE_DEAD="dead"}(H||(H={}));var W=[g.SKIER_JUMP1,g.SKIER_JUMP2,g.SKIER_JUMP3,g.SKIER_JUMP4,g.SKIER_JUMP5],B=((K={})[0]=g.SKIER_LEFT,K[1]=g.SKIER_LEFTDOWN,K[2]=g.SKIER_DOWN,K[3]=g.SKIER_RIGHTDOWN,K[4]=g.SKIER_RIGHT,K),Z=((U={})[0]=g.SKIER_JUMP1,U[1]=g.SKIER_JUMP2,U[2]=g.SKIER_JUMP3,U[3]=g.SKIER_JUMP4,U[4]=g.SKIER_JUMP5,U),Y=function(t){function e(e,i,n,o,r){var a=t.call(this,e,i,n,r)||this;return a.imageName=g.SKIER_DOWN,a.state=H.STATE_SKIING,a.direction=2,a.jumpDirection=2,a.speed=4,a.animations={},a.curAnimation=null,a.curAnimationFrame=0,a.curAnimationFrameTime=Date.now(),a.obstacleManager=o,a.setupAnimations(),a.setAnimation(),a}return j(e,t),e.prototype.setupAnimations=function(){this.animations[H.STATE_FLIPPING]=new C(W,!1,this.ski.bind(this,2))},e.prototype.resetCurrentAnimation=function(){this.curAnimation=null,this.curAnimationFrame=0,this.curAnimationFrameTime=Date.now()},e.prototype.setState=function(t){this.state=t,this.setAnimation()},e.prototype.isCrashed=function(){return this.state===H.STATE_CRASHED},e.prototype.isSkiing=function(){return this.state===H.STATE_SKIING},e.prototype.isJumping=function(){return this.state===H.STATE_JUMPING},e.prototype.isInAir=function(){return this.state===H.STATE_JUMPING||this.state===H.STATE_FLIPPING},e.prototype.isDead=function(){return this.state===H.STATE_DEAD},e.prototype.setDirection=function(t){this.direction=t,this.setDirectionalImage()},e.prototype.setDirectionalImage=function(){this.imageName=B[this.direction]},e.prototype.setJumpDirection=function(t){this.jumpDirection=t,this.setDirectionalJumpImage()},e.prototype.setDirectionalJumpImage=function(){this.imageName=Z[this.jumpDirection]},e.prototype.update=function(t){this.isDead()||(this.move(),this.checkIfHitObstacle(),this.animate(t))},e.prototype.draw=function(){this.isDead()||t.prototype.draw.call(this)},e.prototype.move=function(){switch(this.direction){case 1:this.moveSkierLeftDown();break;case 2:this.moveSkierDown();break;case 3:this.moveSkierRightDown()}},e.prototype.moveSkierLeft=function(){this.position.x-=4},e.prototype.moveSkierLeftDown=function(){this.position.x-=this.speed/E,this.position.y+=this.speed/E},e.prototype.moveSkierDown=function(){this.position.y+=this.speed},e.prototype.moveSkierRightDown=function(){this.position.x+=this.speed/E,this.position.y+=this.speed/E},e.prototype.moveSkierRight=function(){this.position.x+=4},e.prototype.moveSkierUp=function(){this.position.y-=4},e.prototype.handleInput=function(t){if(this.isDead()||this.isInAir())return!1;var e=!0;switch(t){case d.LEFT:this.turnLeft();break;case d.RIGHT:this.turnRight();break;case d.UP:this.turnUp();break;case d.DOWN:this.turnDown();break;case d.SPACE:this.jump();default:e=!1}return e},e.prototype.turnLeft=function(){this.isCrashed()&&this.ski(0,4),0===this.direction?this.moveSkierLeft():this.setDirection(this.direction-1)},e.prototype.turnRight=function(){this.isCrashed()&&this.ski(4,4),4===this.direction?this.moveSkierRight():this.setDirection(this.direction+1)},e.prototype.turnUp=function(){this.isCrashed()||0!==this.direction&&4!==this.direction||this.moveSkierUp()},e.prototype.turnDown=function(){this.isCrashed()||this.setDirection(2)},e.prototype.jump=function(){var t=this;this.isCrashed()&&this.isJumping()||(this.state=H.STATE_JUMPING,this.setJumpDirection(0),setTimeout((function(){t.ski(2)}),500))},e.prototype.flip=function(){this.isCrashed()||this.setState(H.STATE_FLIPPING)},e.prototype.getBounds=function(){var t=this.imageManager.getImage(this.imageName);return t?new A(this.position.x-t.width/2,this.position.y-t.height/2,this.position.x+t.width/2,this.position.y-t.height/4):null},e.prototype.checkIfHitObstacle=function(){var t=this.getBounds();if(t){var e=this.obstacleManager.getObstacles().find((function(e){var i=e.getBounds();return!!i&&R(t,i)}));e&&(this.state===H.STATE_SKIING&&(e.imageName===g.JUMP_RAMP?(this.flip(),this.increaseSpeed()):this.crash()),this.isInAir()&&(e.imageName!==g.TREE&&e.imageName!==g.TREE_CLUSTER||this.crash()))}},e.prototype.crash=function(){this.resetCurrentAnimation(),this.state=H.STATE_CRASHED,this.speed=0,this.imageName=g.SKIER_CRASH},e.prototype.ski=function(t,e){void 0===e&&(e=this.speed),this.state=H.STATE_SKIING,this.speed=e,this.setDirection(t)},e.prototype.setAnimation=function(){if(this.curAnimation=this.animations[this.state],this.curAnimation){this.curAnimationFrame=0;var t=this.curAnimation.getImages();this.imageName=t[this.curAnimationFrame]}},e.prototype.animate=function(t){this.curAnimation&&t-this.curAnimationFrameTime>250&&this.nextAnimationFrame(t)},e.prototype.nextAnimationFrame=function(t){if(this.curAnimation){var e=this.curAnimation.getImages();if(this.curAnimationFrameTime=t,this.curAnimationFrame++,this.curAnimationFrame>=e.length){if(!this.curAnimation.getLooping())return void this.finishAnimation();this.curAnimationFrame=0}this.imageName=e[this.curAnimationFrame]}},e.prototype.finishAnimation=function(){if(this.curAnimation){var t=this.curAnimation.getCallback();this.curAnimation=null,t&&t.apply(null)}},e.prototype.die=function(){this.state=H.STATE_DEAD,this.speed=0},e.prototype.increaseSpeed=function(){this.speed<20&&(this.speed+=.5)},e}(O),q=function(){function t(){this.gameTime=Date.now(),this.init(),this.setupInputHandling(),this.paused=!1,this.score=0}return t.prototype.init=function(){this.canvas=new S("skiCanvas",y,v),this.imageManager=new N,this.obstacleManager=new x(this.imageManager,this.canvas),this.skier=new Y(0,0,this.imageManager,this.obstacleManager,this.canvas),this.rhino=new F(-500,-2e3,this.imageManager,this.canvas),this.calculateGameWindow(),this.obstacleManager.placeInitialObstacles()},t.prototype.setupInputHandling=function(){document.addEventListener("keydown",this.handleKeyDown.bind(this))},t.prototype.load=function(){return t=this,e=void 0,n=function(){return function(t,e){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(c){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(a=0)),a;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,(function(t){switch(t.label){case 0:return[4,this.imageManager.loadImages(w)];case 1:return t.sent(),[2]}}))},new((i=void 0)||(i=Promise))((function(o,r){function a(t){try{c(n.next(t))}catch(t){r(t)}}function s(t){try{c(n.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,s)}c((n=n.apply(t,e||[])).next())}));var t,e,i,n},t.prototype.run=function(){this.canvas.clearCanvas(),this.updateGameWindow(),this.drawGameWindow(),requestAnimationFrame(this.run.bind(this))},t.prototype.updateGameWindow=function(){if(!this.paused){this.gameTime=Date.now(),this.updateGameScore();var t=this.gameWindow;this.calculateGameWindow(),this.obstacleManager.placeNewObstacle(this.gameWindow,t),this.skier.update(this.gameTime),this.rhino.update(this.gameTime,this.skier)}},t.prototype.drawGameWindow=function(){this.canvas.setDrawOffset(this.gameWindow.left,this.gameWindow.top),this.skier.draw(),this.rhino.draw(),this.obstacleManager.drawObstacles(),this.drawScore(),this.drawMenuMessages()},t.prototype.calculateGameWindow=function(){var t=this.skier.getPosition(),e=t.x-y/2,i=t.y-v/2;this.gameWindow=new A(e,i,e+y,i+v)},t.prototype.handleKeyDown=function(t){var e=this.skier.handleInput(t.key);switch(t.key){case d.P:case d.ESC:this.paused?this.resume():this.pause();default:e=!1}e&&t.preventDefault()},t.prototype.pause=function(){this.skier.state===H.STATE_SKIING&&(this.paused=!0)},t.prototype.resume=function(){this.paused=!1},t.prototype.drawMenuMessage=function(t,e,i){void 0===e&&(e=.5),void 0===i&&(i=this.canvas.ctx),i.fillStyle="rgba(0, 0, 0, ".concat(e,")"),i.fillRect(0,0,this.canvas.width,this.canvas.height),i.font="30px Arial",i.fillStyle="white",i.textAlign="center",i.fillText(t,this.canvas.width/2,this.canvas.height/2)},t.prototype.drawScore=function(t){void 0===t&&(t=this.canvas.ctx),t.font="20px Arial",t.fillStyle="black",t.textAlign="left",t.fillText("Score: ".concat(this.score),10,30)},t.prototype.drawMenuMessages=function(){this.paused&&this.drawMenuMessage("Game paused! Your score is ".concat(this.score,"!")),this.skier.state===H.STATE_CRASHED&&this.drawMenuMessage("You crashed! You can keep moving. Be aware of the obstacles!",.2),this.skier.state===H.STATE_DEAD&&this.drawMenuMessage("Game over! Your score was ".concat(this.score,"!"),.5)},t.prototype.updateGameScore=function(){switch(this.skier.state){case H.STATE_SKIING:this.score+=1;break;case H.STATE_JUMPING:this.score+=10;break;case H.STATE_FLIPPING:this.score+=100}},t}();document.addEventListener("DOMContentLoaded",(function(){return t=void 0,e=void 0,n=function(){var t;return function(t,e){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(c){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(a=0)),a;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,(function(e){switch(e.label){case 0:return[4,(t=new q).load()];case 1:return e.sent(),t.run(),[2]}}))},new((i=void 0)||(i=Promise))((function(o,r){function a(t){try{c(n.next(t))}catch(t){r(t)}}function s(t){try{c(n.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,s)}c((n=n.apply(t,e||[])).next())}));var t,e,i,n}))})()})();